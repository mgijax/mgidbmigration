Mon Oct 16 11:43:58 EDT 2000
Password: 
1>    
2> use mgd
1> 
2> checkpoint
1> 
2> sp_rename GXD_Antibody, GXD_Antibody_Save
Object name has been changed.
(return status = 0) 
1> 
2> create table GXD_Antibody (
3>         _Antibody_key int not null,
4>         _Refs_key int null,
5>         _AntibodyClass_key int not null,
6>         _AntibodyType_key int not null,
7> 	_AntibodySpecies_key int not null,
8>         _Antigen_key int null,
9>         antibodyName varchar ( 255 ) not null,
10>         antibodyNote varchar ( 255 ) null,
11>         recogWestern varchar ( 15 ) not null,
12>         recogImmunPrecip varchar ( 15 ) not null,
13>         recogNote varchar ( 255 ) null,
14>         creation_date datetime not null,
15>         modification_date datetime not null 
16> )
17> on mgd_seg_0 
1> 
2> create table GXD_AntibodySpecies (
3> 	_AntibodySpecies_key int not null,
4> 	antibodySpecies varchar(80) not null,
5>         creation_date datetime not null,
6>         modification_date datetime not null 
7> )
8> on mgd_seg_0 
1> 
2> select distinct(antibodySpecies), seq = identity(5)
3> into #speciesTemp
4> from GXD_Antibody_Save
5> where antibodySpecies not like 'not %'
(7 rows affected)
1> 
2> insert into GXD_AntibodySpecies values (-2, "Not Applicable", getdate(), getdate())
(1 row affected)
1> 
2> insert into GXD_AntibodySpecies values (-1, "Not Specified", getdate(), getdate())
(1 row affected)
1> 
2> declare @maxKey int
3> select @maxKey = 0
4> 
5> insert into GXD_AntibodySpecies
6> select @maxKey + seq, antibodySpecies, getdate(), getdate()
7> from #speciesTemp
(1 row affected)
(7 rows affected)
1> 
2> insert GXD_Antibody
3> (_Antibody_key, _AntibodyClass_key, _Refs_key, _AntibodyType_key, _AntibodySpecies_key,
4> _Antigen_key, antibodyName, antibodyNote, recogWestern, recogImmunPrecip, recogNote,
5> creation_date, modification_date)
6> select a._Antibody_key, a._AntibodyClass_key, a._Refs_key, a._AntibodyType_key, s._AntibodySpecies_key,
7> a._Antigen_key, a.antibodyName, a.antibodyNote, a.recogWestern, a.recogImmunPrecip, a.recogNote,
8> a.creation_date, a.modification_date
9> from GXD_Antibody_Save a, GXD_AntibodySpecies s
10> where a.antibodySpecies = s.antibodySpecies
(301 rows affected)
1> 
2> /* defaults */
3> 
4> exec sp_bindefault current_date_default, "GXD_Antibody.creation_date"
Default bound to column.
(return status = 0) 
1> 
2> exec sp_bindefault current_date_default, "GXD_Antibody.modification_date"
Default bound to column.
(return status = 0) 
1> 
2> exec sp_bindefault current_date_default, "GXD_AntibodySpecies.creation_date"
Default bound to column.
(return status = 0) 
1> 
2> exec sp_bindefault current_date_default, "GXD_AntibodySpecies.modification_date"
Default bound to column.
(return status = 0) 
1> 
2> /* keys */
3> 
4> sp_primarykey GXD_Antibody,_Antibody_key
New primary key added.
(return status = 0) 
1> 
2> sp_primarykey GXD_AntibodySpecies,_AntibodySpecies_key
New primary key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_Antibody, BIB_Refs, _Refs_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_AntibodyMarker, GXD_Antibody, _Antibody_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_AntibodyPrep, GXD_Antibody, _Antibody_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_AntibodyAlias, GXD_Antibody, _Antibody_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_Antibody, GXD_AntibodyClass, _AntibodyClass_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_Antibody, GXD_AntibodyType, _AntibodyType_key
New foreign key added.
(return status = 0) 
1> 
2> sp_foreignkey GXD_Antibody, GXD_AntibodySpecies, _AntibodySpecies_key
New foreign key added.
(return status = 0) 
1> 
2> /* indexes */
3> 
4> create unique clustered index index_Antibody_key on GXD_Antibody ( _Antibody_key ) 
5> on mgd_seg_0
1> 
2> create nonclustered index index_modification_date on GXD_Antibody ( modification_date ) 
3> on mgd_seg_1
1> 
2> create nonclustered index index_AntibodyClass_key on GXD_Antibody ( _AntibodyClass_key ) 
3> on mgd_seg_1
1> 
2> create nonclustered index index_AntibodyType_key on GXD_Antibody ( _AntibodyType_key ) 
3> on mgd_seg_1
1> 
2> create nonclustered index index_AntibodySpecies_key on GXD_Antibody ( _AntibodySpecies_key ) 
3> on mgd_seg_1
1> 
2> create nonclustered index index_Antigen_key on GXD_Antibody ( _Antigen_key ) 
3> on mgd_seg_1
1> 
2> create nonclustered index index_Refs_key on GXD_Antibody ( _Refs_key ) 
3> on mgd_seg_1
1> 
2> create unique clustered index index_AntibodySpecies_key on GXD_AntibodySpecies (_AntibodySpecies_key)
3> with sorted_data on mgd_seg_0
1> 
2> create nonclustered index index_modification_date on GXD_AntibodySpecies ( modification_date ) 
3> on mgd_seg_1
1> 
2> /* permissions */
3> 
4> grant all on GXD_Antibody to dab, dph, ijm
1> 
2> grant select on GXD_Antibody to public
1> 
2> grant all on GXD_AntibodySpecies to dab, dph, ijm
1> 
2> grant select on GXD_AntibodySpecies to public
1> 
2> /* remove when migrating to production */
3> 
4> grant all on GXD_Antibody to progs
1> 
2> grant all on GXD_AntibodySpecies to progs
1> 
2> drop table GXD_Antibody_Save
1> 
2> checkpoint
Mon Oct 16 11:44:01 EDT 2000
